(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-addRole-addRole"],{"2f27":function(e,t,a){var o=a("c86c");t=o(!1),t.push([e.i,'.container[data-v-c5a7310c]{min-height:100vh;padding-bottom:%?15?%}.container[data-v-c5a7310c]::before{content:"";display:table;height:0}.from[data-v-c5a7310c]{width:%?650?%;padding:%?25?%;\n\t/* margin-top: 200rpx; */margin:%?100?% auto;border-radius:%?15?%;background:none}.from .btn[data-v-c5a7310c]{width:%?650?%}.from .input[data-v-c5a7310c]{border-radius:%?15?%;background:#fff}',""]),e.exports=t},"33a9":function(e,t,a){"use strict";a.r(t);var o=a("896d"),n=a("e953");for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);a("a2e6");var r=a("828b"),s=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"c5a7310c",null,!1,o["a"],void 0);t["default"]=s.exports},"81f5":function(e,t,a){"use strict";a("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("fd3c");var o=a("03c2"),n=a("7e7d"),i={data:function(){return{menuList:[],menuList2:[],roleFrom:{roleId:"0",mId:"0",roleStatus:"1",roleName:"",description:"",menuIds:[],permissionIds:0},roleId:"",permissionList:[]}},methods:{showAlert:function(){this.$refs.alertAdd.open()},getMenu:function(){var e=this;(0,o.getMenuList)({pageNum:1,pageSize:20}).then((function(t){console.log(t.data.data),200==t.data.code&&(e.menuList=(0,n.arrToTree)(t.data.data.list,0),e.menuList2=t.data.data.list,console.log("转化成=>"),console.log(e.menuList))}))},getPermission:function(){var e=this;(0,o.getPermissionById)().then((function(t){200==t.data.code&&(e.permissionList=t.data.data.map((function(e){return{text:e.permission_name,value:e.permission_id}})),console.log("数据权限",e.permissionList))}))},saveUser:function(){console.log(this.roleFrom.menuIds);var e={};e=this.roleFrom,e.roleIds=[this.roleFrom.roleId];var t=e.menuIds.join(",");e.menuIds=t,console.log(e),(0,o.addRoleInfo)(e).then((function(e){if(console.log(e),200!=e.data.code)return uni.showToast({title:e.data.msg,icon:"error"});uni.showToast({title:"新增成功"}),uni.navigateBack()}))}},onShow:function(){this.getMenu(),this.getPermission()}};t.default=i},"896d":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return o}));var o={uniForms:a("1a6d").default,uniFormsItem:a("e081").default,uniEasyinput:a("9ccf").default,customTreeSelect:a("f2dd").default,uniPopup:a("7822").default,uniPopupDialog:a("eb8c").default},n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"from"},[a("uni-forms",{ref:"roleFrom",attrs:{modelValue:e.roleFrom}},[a("uni-forms-item",{attrs:{label:"身份名称",name:"roleName","label-width":"250"}},[a("uni-easyinput",{staticClass:"input",attrs:{placeholder:"请输入身份名称"},model:{value:e.roleFrom.roleName,callback:function(t){e.$set(e.roleFrom,"roleName",t)},expression:"roleFrom.roleName"}})],1),a("uni-forms-item",{attrs:{label:"身份描述",name:"description","label-width":"250"}},[a("uni-easyinput",{staticClass:"input",attrs:{type:"textarea",autoHeight:!0,placeholder:"请输入身份描述"},model:{value:e.roleFrom.description,callback:function(t){e.$set(e.roleFrom,"description",t)},expression:"roleFrom.description"}})],1),a("uni-forms-item",{attrs:{label:"身份权限",name:"roleName","label-width":"250"}},[a("custom-tree-select",{staticClass:"input",attrs:{listData:e.menuList,dataLabel:"menuName",dataValue:"menuId",dataChildren:"children",mutiple:!0,linkage:!0},model:{value:e.roleFrom.menuIds,callback:function(t){e.$set(e.roleFrom,"menuIds",t)},expression:"roleFrom.menuIds"}})],1),a("uni-forms-item",{attrs:{label:"数据权限",name:"roleName","label-width":"250"}},[a("custom-tree-select",{staticClass:"input",attrs:{listData:e.permissionList,dataLabel:"text",dataValue:"value",dataChildren:"children",mutiple:!0,linkage:!0},model:{value:e.roleFrom.permissionIds,callback:function(t){e.$set(e.roleFrom,"permissionIds",t)},expression:"roleFrom.permissionIds"}})],1)],1),a("v-uni-button",{attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showAlert()}}},[e._v("新增角色")]),a("uni-popup",{ref:"alertAdd",attrs:{type:"dialog"}},[a("uni-popup-dialog",{attrs:{type:"info",cancelText:"关闭",confirmText:"确认",title:"通知",content:"确认提交表单?"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.saveUser()},close:function(t){arguments[0]=t=e.$handleEvent(t),e.dialogClose.apply(void 0,arguments)}}})],1)],1)],1)},i=[]},a2e6:function(e,t,a){"use strict";var o=a("caf2"),n=a.n(o);n.a},caf2:function(e,t,a){var o=a("2f27");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=a("967d").default;n("0863a270",o,!0,{sourceMap:!1,shadowMode:!1})},e953:function(e,t,a){"use strict";a.r(t);var o=a("81f5"),n=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t["default"]=n.a}}]);