(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/addUser/addUser"],{"072b":function(e,t,n){"use strict";var o=n("d9bc"),r=n.n(o);r.a},"4b88":function(e,t,n){"use strict";n.r(t);var o=n("f2c9"),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},"86b4":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={uniSteps:function(){return n.e("uni_modules/uni-steps/components/uni-steps/uni-steps").then(n.bind(null,"e32b"))},uniFormsItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(n.bind(null,"e081"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"9ccf"))},uniDataSelect:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(n.bind(null,"4807"))},uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"7822"))},uniPopupDialog:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(n.bind(null,"eb8c"))}},r=function(){var e=this.$createElement,t=(this._self._c,this.getNameById(this.roleList,this.userFrom.roleId)),n=this.getNameById(this.merChantList,this.userFrom.mid);this.$mp.data=Object.assign({},{$root:{m0:t,m1:n}})},i=[]},a572:function(e,t,n){"use strict";(function(e,t){var o=n("47a9");n("faef");o(n("3240"));var r=o(n("b63c"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},b63c:function(e,t,n){"use strict";n.r(t);var o=n("86b4"),r=n("4b88");for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n("072b");var s=n("828b"),u=Object(s["a"])(r["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);t["default"]=u.exports},d9bc:function(e,t,n){},f2c9:function(e,t,n){"use strict";(function(e){var o=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n("7ca3")),i=n("7e7d"),s=n("03c2");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var a={data:function(){return{stepList:[{title:"用户信息"},{title:"绑定信息"},{title:"添加完成"}],active:0,userFrom:{name:"",telephone:"",username:"",nickName:"",email:"",mid:0,roleId:""},confirmPassword:"",merChantList:[],roleList:[],searchFrom:{pageSize:100,pageNum:1}}},computed:{loginUser:function(){return this.$store.state.loginUser}},methods:{showAlert:function(){this.$refs.alertAdd.open()},encodepassword:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.push(e),(0,i.encode)("0x12",t)},isValidPhoneNumber:function(e){return/^1[3456789]\d{9}$/.test(e)},addActive:function(){0==this.active?""==this.userFrom.username||""==this.userFrom.nickName||""==this.userFrom.password||""==this.confirmPassword?e.showToast({icon:"error",title:"含有未填项"}):this.userFrom.password.length<6||this.confirmPassword.length<6?e.showToast({icon:"error",title:"密码长度至少为6"}):this.userFrom.password!=this.confirmPassword?e.showToast({icon:"error",title:"密码不一致"}):this.active++:1==this.active&&(""==this.userFrom.email||""==this.userFrom.name||""==this.userFrom.telephone||""==this.userFrom.roleId?e.showToast({icon:"error",title:"含有未填项"}):11!=this.userFrom.telephone.length?e.showToast({icon:"error",title:"手机号应为11位"}):this.isValidPhoneNumber(this.userFrom.telephone)?this.active++:e.showToast({icon:"error",title:"请输入正确手机号"}))},subtractActive:function(){0!=this.active&&this.active--},addUser:function(){var t={};t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.userFrom),t.roleIds=[this.userFrom.roleId],t.password=this.encodepassword(t.password),(0,s.addUserInfo)(t).then((function(t){console.log(t),200==t.data.code?(console.log(t),e.showToast({title:"用户添加成功"}),e.navigateBack()):e.showToast({icon:"error",title:t.data.msg})}))},getMerchant:function(e){var t=this,n={userId:this.loginUser.id};e&&(n.roleId=e),(0,s.getQueryProject)(n).then((function(e){console.log(e),200==e.data.code&&(t.merChantList=e.data.data.map((function(e){return{text:e.mname,value:e.mid}})),console.log(t.merChantList))}))},change:function(e){console.log("e:",e),console.log(this.userFrom.mid)},getRole:function(){var e=this;(0,s.getRoleList)(this.searchFrom).then((function(t){200==t.data.code&&(e.roleList=t.data.data.list.map((function(e){return{text:e.description,value:e.roleId}})))})).catch((function(e){console.error(e)}))},changeRoleId:function(e){console.log(e),this.getMerchant(e),this.userFrom.mid=null},getNameById:function(e,t){var n=e.find((function(e){return e.value===t}));return n?n.text:null}},onShow:function(){console.log(this.loginUser.id),this.getMerchant(),this.getRole()}};t.default=a}).call(this,n("df3c")["default"])}},[["a572","common/runtime","common/vendor"]]]);